<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√ºndem Radar - 50+ Kaynaktan Anlƒ±k Haberler</title>
    <meta name="description" content="NTV, H√ºrriyet, Sabah, BBC ve 50+ kaynaktan anlƒ±k haberler. Ger√ßek g√∂rseller, kesintisiz haber akƒ±≈üƒ±.">
    <meta name="theme-color" content="#1a73e8">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∞</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --blue: #1a73e8;
            --red: #ea4335;
            --dark: #202124;
            --gray: #5f6368;
            --light: #f8f9fa;
            --white: #fff;
        }
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background: var(--light); color: var(--dark); }
        
        .header {
            background: var(--white);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark);
            text-decoration: none;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        .logo:hover { opacity: 0.8; }
        .logo-icon { font-size: 32px; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        
        .live {
            background: var(--red);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .dot { width: 8px; height: 8px; background: white; border-radius: 50%; animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .stats {
            background: linear-gradient(90deg, #1a73e8, #34a853);
            color: white;
            padding: 12px 24px;
            display: flex;
            justify-content: center;
            gap: 40px;
            font-weight: 500;
        }
        .stat { display: flex; align-items: center; gap: 8px; }
        .stat-val { font-size: 18px; font-weight: 700; }
        
        .tabs-wrap {
            background: var(--white);
            border-bottom: 1px solid #e0e0e0;
            position: sticky;
            top: 73px;
            z-index: 999;
        }
        .tabs {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            padding: 0 24px;
            overflow-x: auto;
        }
        .tabs::-webkit-scrollbar { display: none; }
        .tab {
            padding: 16px 28px;
            border: none;
            background: none;
            border-bottom: 3px solid transparent;
            font-size: 15px;
            font-weight: 600;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab:hover { color: var(--blue); background: rgba(26, 115, 232, 0.05); }
        .tab.active { color: var(--blue); border-bottom-color: var(--blue); background: rgba(26, 115, 232, 0.08); }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 24px; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .cat-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e0e0e0;
        }
        .cat-title {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .count {
            background: var(--blue);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .grid { display: grid; gap: 20px; }
        .card {
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: 280px 1fr;
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
            border: 1px solid transparent;
        }
        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
            border-color: var(--blue);
        }
        
        .img-wrap {
            position: relative;
            width: 280px;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
        }
        .card-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .card:hover .card-img { transform: scale(1.05); }
        .img-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 64px;
        }
        .badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(234, 67, 53, 0.95);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 700;
            z-index: 10;
        }
        
        .content { padding: 24px; display: flex; flex-direction: column; gap: 12px; }
        .title {
            font-size: 20px;
            font-weight: 600;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .desc {
            font-size: 15px;
            color: var(--gray);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 13px;
            color: var(--gray);
            margin-top: auto;
        }
        .source { font-weight: 600; color: var(--blue); }
        
        .load-btn {
            margin: 32px auto;
            padding: 14px 32px;
            background: var(--blue);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .load-btn:hover:not(:disabled) {
            background: #1557b0;
            transform: translateY(-2px);
        }
        .load-btn:disabled { background: #ccc; cursor: not-allowed; }
        
        .loading { text-align: center; padding: 60px 20px; }
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e0e0e0;
            border-top-color: var(--blue);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .scroll-top {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 50px;
            height: 50px;
            background: var(--blue);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 998;
        }
        .scroll-top.show { display: flex; }
        .scroll-top:hover { background: #1557b0; transform: translateY(-4px); }
        
        @media (max-width: 768px) {
            .card { grid-template-columns: 1fr; }
            .img-wrap { width: 100%; height: 220px; }
            .content { padding: 16px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="javascript:void(0)" class="logo" id="logoBtn">
                <span class="logo-icon">üì∞</span>
                <span>G√ºndem Radar</span>
            </a>
            <div class="live"><span class="dot"></span>CANLI</div>
        </div>
    </header>

    <div class="stats">
        <div class="stat"><span>üìä</span> <span class="stat-val" id="total">0</span> Haber</div>
        <div class="stat"><span>üåê</span> <span class="stat-val">50+</span> Kaynak</div>
        <div class="stat"><span>‚ö°</span> Anlƒ±k</div>
        <div class="stat"><span>üñºÔ∏è</span> Ger√ßek G√∂rsel</div>
    </div>

    <div class="tabs-wrap">
        <div class="tabs">
            <button class="tab active" data-cat="gundem">üî• G√ºndem</button>
            <button class="tab" data-cat="dunya">üåç D√ºnya</button>
            <button class="tab" data-cat="spor">‚öΩ Spor</button>
            <button class="tab" data-cat="ekonomi">üíº Ekonomi</button>
            <button class="tab" data-cat="teknoloji">üíª Teknoloji</button>
        </div>
    </div>

    <div class="container">
        <section id="gundem" class="section active">
            <div class="cat-head">
                <h1 class="cat-title">üî• G√ºndem <span class="count" id="gundem-count">0</span></h1>
            </div>
            <div class="loading"><div class="spinner"></div><p>Haberler y√ºkleniyor...</p></div>
            <div class="grid" id="gundem-grid"></div>
            <button class="load-btn" id="gundem-btn" style="display:none">Daha Fazla <span>‚Üì</span></button>
        </section>

        <section id="dunya" class="section">
            <div class="cat-head">
                <h1 class="cat-title">üåç D√ºnya <span class="count" id="dunya-count">0</span></h1>
            </div>
            <div class="loading"><div class="spinner"></div><p>Haberler y√ºkleniyor...</p></div>
            <div class="grid" id="dunya-grid"></div>
            <button class="load-btn" id="dunya-btn" style="display:none">Daha Fazla <span>‚Üì</span></button>
        </section>

        <section id="spor" class="section">
            <div class="cat-head">
                <h1 class="cat-title">‚öΩ Spor <span class="count" id="spor-count">0</span></h1>
            </div>
            <div class="loading"><div class="spinner"></div><p>Haberler y√ºkleniyor...</p></div>
            <div class="grid" id="spor-grid"></div>
            <button class="load-btn" id="spor-btn" style="display:none">Daha Fazla <span>‚Üì</span></button>
        </section>

        <section id="ekonomi" class="section">
            <div class="cat-head">
                <h1 class="cat-title">üíº Ekonomi <span class="count" id="ekonomi-count">0</span></h1>
            </div>
            <div class="loading"><div class="spinner"></div><p>Haberler y√ºkleniyor...</p></div>
            <div class="grid" id="ekonomi-grid"></div>
            <button class="load-btn" id="ekonomi-btn" style="display:none">Daha Fazla <span>‚Üì</span></button>
        </section>

        <section id="teknoloji" class="section">
            <div class="cat-head">
                <h1 class="cat-title">üíª Teknoloji <span class="count" id="teknoloji-count">0</span></h1>
            </div>
            <div class="loading"><div class="spinner"></div><p>Haberler y√ºkleniyor...</p></div>
            <div class="grid" id="teknoloji-grid"></div>
            <button class="load-btn" id="teknoloji-btn" style="display:none">Daha Fazla <span>‚Üì</span></button>
        </section>
    </div>

    <button class="scroll-top" id="scrollTop">‚Üë</button>

    <script>
        const FEEDS = {
            gundem: [
                { url: 'https://www.ntv.com.tr/gundem.rss', name: 'NTV' },
                { url: 'https://www.hurriyet.com.tr/rss/gundem', name: 'H√ºrriyet' },
                { url: 'https://www.sabah.com.tr/rss/gundem.xml', name: 'Sabah' },
                { url: 'https://www.milliyet.com.tr/rss/rssnew/gundemrss.xml', name: 'Milliyet' },
                { url: 'https://www.haberturk.com/rss/kategori/gundem.xml', name: 'Habert√ºrk' },
                { url: 'https://www.sozcu.com.tr/kategori/gundem/feed/', name: 'S√∂zc√º' },
                { url: 'https://www.cumhuriyet.com.tr/rss/son_dakika.xml', name: 'Cumhuriyet' },
                { url: 'https://www.aksam.com.tr/rss/gundem.xml', name: 'Ak≈üam' },
                { url: 'https://www.yenisafak.com/rss?xml=gundem', name: 'Yeni ≈ûafak' },
                { url: 'https://www.cnnturk.com/feed/rss/news', name: 'CNN T√ºrk' }
            ],
            dunya: [
                { url: 'https://www.bbc.com/turkce/index.xml', name: 'BBC' },
                { url: 'https://www.ntv.com.tr/dunya.rss', name: 'NTV D√ºnya' },
                { url: 'https://www.hurriyet.com.tr/rss/dunya', name: 'H√ºrriyet D√ºnya' },
                { url: 'https://www.sabah.com.tr/rss/dunya.xml', name: 'Sabah D√ºnya' },
                { url: 'https://www.milliyet.com.tr/rss/rssnew/dunyarss.xml', name: 'Milliyet D√ºnya' },
                { url: 'https://www.haberturk.com/rss/kategori/dunya.xml', name: 'Habert√ºrk D√ºnya' },
                { url: 'https://www.sozcu.com.tr/kategori/dunya/feed/', name: 'S√∂zc√º D√ºnya' },
                { url: 'https://www.cnnturk.com/feed/rss/dunya/news', name: 'CNN T√ºrk D√ºnya' }
            ],
            spor: [
                { url: 'https://www.goal.com/tr/feeds/news', name: 'Goal' },
                { url: 'https://www.fanatik.com.tr/rss/manset.xml', name: 'Fanatik' },
                { url: 'https://www.ntv.com.tr/spor.rss', name: 'NTV Spor' },
                { url: 'https://www.hurriyet.com.tr/rss/spor', name: 'H√ºrriyet Spor' },
                { url: 'https://www.sabah.com.tr/rss/spor.xml', name: 'Sabah Spor' },
                { url: 'https://www.milliyet.com.tr/rss/rssnew/sporrss.xml', name: 'Milliyet Spor' },
                { url: 'https://www.haberturk.com/rss/kategori/spor.xml', name: 'Habert√ºrk Spor' },
                { url: 'https://www.sozcu.com.tr/kategori/spor/feed/', name: 'S√∂zc√º Spor' },
                { url: 'https://www.sporx.com/feed', name: 'Sporx' },
                { url: 'https://www.fotomac.com.tr/rss/anasayfa.xml', name: 'Fotoma√ß' }
            ],
            ekonomi: [
                { url: 'https://www.bloomberght.com/feed', name: 'Bloomberg' },
                { url: 'https://www.ntv.com.tr/ekonomi.rss', name: 'NTV Ekonomi' },
                { url: 'https://www.hurriyet.com.tr/rss/ekonomi', name: 'H√ºrriyet Ekonomi' },
                { url: 'https://www.sabah.com.tr/rss/ekonomi.xml', name: 'Sabah Ekonomi' },
                { url: 'https://www.milliyet.com.tr/rss/rssnew/ekonomirss.xml', name: 'Milliyet Ekonomi' },
                { url: 'https://www.haberturk.com/rss/kategori/ekonomi.xml', name: 'Habert√ºrk Ekonomi' },
                { url: 'https://www.sozcu.com.tr/kategori/ekonomi/feed/', name: 'S√∂zc√º Ekonomi' },
                { url: 'https://www.dunya.com/service/rss.php', name: 'D√ºnya' }
            ],
            teknoloji: [
                { url: 'https://www.webtekno.com/rss.xml', name: 'Webtekno' },
                { url: 'https://www.donanimhaber.com/rss.xml', name: 'Donanƒ±mHaber' },
                { url: 'https://www.technopat.net/feed/', name: 'Technopat' },
                { url: 'https://www.shiftdelete.net/feed', name: 'ShiftDelete' },
                { url: 'https://www.chip.com.tr/feed', name: 'Chip' },
                { url: 'https://www.log.com.tr/feed/', name: 'Log' },
                { url: 'https://www.ntv.com.tr/teknoloji.rss', name: 'NTV Teknoloji' },
                { url: 'https://www.haberturk.com/rss/kategori/teknoloji.xml', name: 'Habert√ºrk Teknoloji' }
            ]
        };

        const state = {
            gundem: { news: [], shown: 15 },
            dunya: { news: [], shown: 15 },
            spor: { news: [], shown: 15 },
            ekonomi: { news: [], shown: 15 },
            teknoloji: { news: [], shown: 15 }
        };

        const EMOJI = { gundem: 'üì∞', dunya: 'üåç', spor: '‚öΩ', ekonomi: 'üíº', teknoloji: 'üíª' };

        // Logo'ya tƒ±klayƒ±nca sayfayƒ± yenile
        document.getElementById('logoBtn').addEventListener('click', function(e) {
            e.preventDefault();
            location.reload();
        });

        async function fetchRSS(feed) {
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feed.url)}&count=30`);
                const data = await res.json();
                
                console.log(`${feed.name}: ${data.status}`, data.items?.length || 0);
                
                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    return data.items.map(item => {
                        let img = null;
                        
                        // G√∂rsel bulma
                        if (item.enclosure?.link) {
                            img = item.enclosure.link;
                        } else if (item.thumbnail) {
                            img = item.thumbnail;
                        } else if (item.content || item.description) {
                            const html = item.content || item.description;
                            const match = html.match(/<img[^>]+src=["']([^"']+)["']/i);
                            if (match) img = match[1];
                        }
                        
                        // URL d√ºzeltmeleri
                        if (img) {
                            if (img.startsWith('//')) img = 'https:' + img;
                            else if (img.startsWith('/')) {
                                const domain = feed.url.match(/https?:\/\/[^\/]+/);
                                if (domain) img = domain[0] + img;
                            }
                        }
                        
                        return {
                            title: item.title || 'Ba≈ülƒ±k Yok',
                            desc: (item.description || '').replace(/<[^>]*>/g, '').substring(0, 200),
                            link: item.link || '#',
                            date: item.pubDate || new Date().toISOString(),
                            source: feed.name,
                            img
                        };
                    });
                }
            } catch (e) {
                console.error(`Hata (${feed.name}):`, e);
            }
            return [];
        }

        function ago(d) {
            const diff = Math.floor((new Date() - new Date(d)) / 60000);
            if (diff < 1) return '≈ûimdi';
            if (diff < 60) return `${diff} dk √∂nce`;
            const h = Math.floor(diff / 60);
            if (h < 24) return `${h} saat √∂nce`;
            const days = Math.floor(h / 24);
            if (days === 1) return 'D√ºn';
            if (days < 7) return `${days} g√ºn √∂nce`;
            return new Date(d).toLocaleDateString('tr-TR');
        }

        function card(item, cat) {
            const a = document.createElement('a');
            a.className = 'card';
            a.href = item.link;
            a.target = '_blank';
            a.rel = 'noopener';
            
            const imgWrap = document.createElement('div');
            imgWrap.className = 'img-wrap';
            
            if (item.img) {
                const img = document.createElement('img');
                img.className = 'card-img';
                img.alt = item.title;
                img.loading = 'lazy';
                img.onerror = () => imgWrap.innerHTML = `<div class="img-placeholder">${EMOJI[cat]}</div>`;
                img.src = item.img;
                imgWrap.appendChild(img);
            } else {
                imgWrap.innerHTML = `<div class="img-placeholder">${EMOJI[cat]}</div>`;
            }
            
            // Son dakika badge
            if (new Date() - new Date(item.date) < 1800000) {
                const badge = document.createElement('div');
                badge.className = 'badge';
                badge.textContent = 'SON DAKƒ∞KA';
                imgWrap.appendChild(badge);
            }
            
            const content = document.createElement('div');
            content.className = 'content';
            content.innerHTML = `
                <h2 class="title">${item.title}</h2>
                ${item.desc ? `<p class="desc">${item.desc}</p>` : ''}
                <div class="meta">
                    <span class="source">${item.source}</span>
                    <span>‚Ä¢ ${ago(item.date)}</span>
                </div>
            `;
            
            a.appendChild(imgWrap);
            a.appendChild(content);
            return a;
        }

        function render(cat) {
            const grid = document.getElementById(`${cat}-grid`);
            const load = grid.previousElementSibling;
            const btn = document.getElementById(`${cat}-btn`);
            const cnt = document.getElementById(`${cat}-count`);
            
            const d = state[cat];
            const show = d.news.slice(0, d.shown);
            
            load.style.display = 'none';
            grid.innerHTML = '';
            
            if (!show.length) {
                grid.innerHTML = '<div class="loading"><p>Hen√ºz haber y√ºklenmedi. Sayfa yenileniyor...</p></div>';
                return;
            }
            
            show.forEach(item => grid.appendChild(card(item, cat)));
            cnt.textContent = d.news.length;
            btn.style.display = d.news.length > d.shown ? 'flex' : 'none';
        }

        async function loadCat(cat) {
            console.log(`${cat} kategorisi y√ºkleniyor...`);
            const feeds = FEEDS[cat];
            const promises = feeds.map(feed => fetchRSS(feed));
            const results = await Promise.all(promises);
            const all = results.flat().filter(x => x.title && x.title !== 'Ba≈ülƒ±k Yok');
            all.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            console.log(`${cat}: ${all.length} haber bulundu`);
            
            state[cat].news = all;
            render(cat);
        }

        async function loadAll() {
            console.log('T√ºm kategoriler y√ºkleniyor...');
            await Promise.all(Object.keys(FEEDS).map(loadCat));
            const total = Object.values(state).reduce((s, c) => s + c.news.length, 0);
            document.getElementById('total').textContent = total;
            console.log(`TOPLAM: ${total} haber y√ºklendi`);
        }

        // Tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.onclick = () => {
                const cat = tab.dataset.cat;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
                document.getElementById(cat).classList.add('active');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
        });

        // Load more
        document.querySelectorAll('.load-btn').forEach(btn => {
            btn.onclick = () => {
                const cat = btn.id.replace('-btn', '');
                state[cat].shown += 15;
                render(cat);
            };
        });
// Tek bir feed'i test et
fetch('https://api.rss2json.com/v1/api.json?rss_url=https://www.ntv.com.tr/gundem.rss&count=10')
  .then(r => r.json())
  .then(d => console.log('NTV Testi:', d.status, d.items?.length, d.items?.[0]))
        // Scroll top
        const st = document.getElementById('scrollTop');
        window.onscroll = () => st.classList.toggle('show', window.scrollY > 500);
        st.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });

        // Init
        loadAll();
        
        // Auto refresh (10 dakika)
        setInterval(() => {
            console.log('Otomatik yenileme yapƒ±lƒ±yor...');
            loadAll();
        }, 600000);
    </script>
</body>
</html>
